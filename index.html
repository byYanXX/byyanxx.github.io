<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>yby's blog</title><meta name="author" content="yanxx"><meta name="copyright" content="yanxx"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="全世界的无产者，联合起来！">
<meta property="og:type" content="website">
<meta property="og:title" content="yby&#39;s blog">
<meta property="og:url" content="https://by-yanxx.github.io/index.html">
<meta property="og:site_name" content="yby&#39;s blog">
<meta property="og:description" content="全世界的无产者，联合起来！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://by-yanxx.github.io/img/%E5%A4%B4.jpg">
<meta property="article:author" content="yanxx">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://by-yanxx.github.io/img/%E5%A4%B4.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://by-yanxx.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'yby\'s blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-03-06 15:04:29'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"> <script src="/live2d-widget/autoload.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E5%A4%B4.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-mug-saucer"></i><span> 发现</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/2023/02/26/%E5%85%B1%E4%BA%A7%E5%85%9A%E5%AE%A3%E8%A8%80/"><i class="fa-fw fas fa-hand-fist"></i><span> 共产党宣言</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://996.icu/#/zh_CN"><i class="fa-fw fas fa-heart-crack"></i><span> 996.ICU</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-card"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/bg4.png')"><nav id="nav"><span id="blog-info"><a href="/" title="yby's blog"><span class="site-name">yby's blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-mug-saucer"></i><span> 发现</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/2023/02/26/%E5%85%B1%E4%BA%A7%E5%85%9A%E5%AE%A3%E8%A8%80/"><i class="fa-fw fas fa-hand-fist"></i><span> 共产党宣言</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://996.icu/#/zh_CN"><i class="fa-fw fas fa-heart-crack"></i><span> 996.ICU</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-card"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">yby's blog</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/02/26/%E5%85%B1%E4%BA%A7%E5%85%9A%E5%AE%A3%E8%A8%80/" title="共产党宣言">共产党宣言</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack sticky"></i><span class="sticky">置顶</span><span class="article-meta-separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-25T16:00:00.000Z" title="发表于 2023-02-26 00:00:00">2023-02-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%94%BF%E6%B2%BB-%E7%BB%8F%E6%B5%8E-%E6%97%A0%E4%BA%A7%E8%80%85/">政治/经济/无产者</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%85%B1%E4%BA%A7%E4%B8%BB%E4%B9%89/">共产主义</a></span></div><div class="content">《共产党宣言》全文
《共产党宣言》全文
卡•马克思 弗•恩格斯
1847年12月—1848年1月
英文：The Communist Manifesto
(Manifesto of the Communist Party)
德文：Manifest der Kommunistischen Partei

引言一个幽灵，共产主义的幽灵，在欧洲游荡。为了对这个幽灵进行神圣的围剿，旧欧洲的一切势力：教皇和沙皇、梅特涅和基佐、法国的激进派和德国的警察，都联合起来了。
有哪一个反对党不被它的当政的敌人骂为共产党呢？又有哪一个反对党不拿共产主义这个罪名去回敬更进步的反对党人和自己的反动敌人呢？
从这一事实中可以得出两个结论：
共产主义已经被欧洲的一切势力公认为一种势力；
现在是共产党人向全世界公开说明自己的观点、自己的目的、自己的意图并且拿出自己党的宣言来批驳关于共产主义幽灵的神话的时候了。
为了这个目的，各国共产党人集会于伦敦，拟定了如下的宣言，用英文、法文、德文、意大利文、弗拉芒文和丹麦文公布于世。
一、资产者和无产者⑴至今一切社会的历史⑵都是阶级斗争的历史。
自由民和奴隶、贵族和平民、领主和农奴 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/03/06/%E8%AE%A1%E7%BD%91_HTTP%20%E7%AF%87/" title="计网_HTTP 篇">计网_HTTP 篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-05T16:00:00.000Z" title="发表于 2023-03-06 00:00:00">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/HTTP/">HTTP</a></span></div><div class="content">内容包括：

HTTP 概念、状态码、常见字段
GET、POST
缓存技术
特性、版本区别
HTTPS vs HTTP
HTTP&#x2F;1.1 如何优化
RPC？WebSocket？




认识 HTTP就特么你叫 HTTP 啊
译名：超文本传输控制协议，所谓超文本是指文字、图片、视频等信息
基于 TCP（HTTP&#x2F;3 是基于 UDP）
是一个双向协议
目前大多使用的是 HTTP&#x2F;1.1 协议

HTTP 

状态码
1xx：提示信息，是一种中间状态，很少用
2xx：表示服务器成功 处理了客户端的请求
200 OK：一切正常
204 No Content：和 200 一样，只不过没有响应 body 数据
206：分块下载或断点续传，表示响应 body 的数据不是所有数据，只是一部分数据


3xx：表示客户端请求的资源有所改动，需要重定向 到指定 URL
301：永久重定向，请求的资源已经不存在
302：临时重定向，请求的资源还在，但需要指向新的 URL 去访问
304：缓存重定向，不代表跳转，表示该资源在缓存区里可以继续使用，用于缓存控制


4xx：表示客 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/03/02/%E3%80%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E3%80%8D%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81%E9%81%BF%E5%85%8D%E6%AD%BB%E9%94%81/" title="「源码分析」可重入锁避免死锁">「源码分析」可重入锁避免死锁</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-01T16:00:00.000Z" title="发表于 2023-03-02 00:00:00">2023-03-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">源码分析</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91/">并发</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/JUC/">JUC</a></span></div><div class="content">内容包括：

为什么可重入锁会避免死锁，而非可重入锁可能死锁




源码
分析首先 ReentrantLock 和 NonReentrantLock 都继承父类 AQS，其父类 AQS 中维护了一个同步状态 status 来计数重入次数，status 初始值为 0。
当线程尝试获取锁时，可重入锁先尝试获取并更新 status 值，如果 status == 0 表示没有其他线程在执行同步代码，则把 status 置为 1，当前线程开始执行，如果 status != 0，则判断当前线程是否是获取到这个锁的线程，如果是的话执行 status + 1，且当前线程可以再次获取锁。而非可重入锁是直接去获取并尝试更新当前 status 的值，如果 status != 0 的话会导致其获取锁失败，当前线程阻塞。
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/03/02/Java%20%E5%B9%B6%E5%8F%91_synchronized%20%E5%8F%8A%E5%85%B6%E4%BC%98%E5%8C%96/" title="Java 并发_synchronized 及其优化">Java 并发_synchronized 及其优化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-01T16:00:00.000Z" title="发表于 2023-03-02 00:00:00">2023-03-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JavaSE/">JavaSE</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91/">并发</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%85%B3%E9%94%AE%E5%AD%97/">关键字</a></span></div><div class="content">内容包括：

概览
原理
优化
与 Lock 对比




如何使用 synchronized注意点：

一把锁只能同时被一个线程获取，没有获取锁的线程只能等待
每个实例都有一把锁（this），但锁对象如果是 *.class（也就是 Class 对象） 或 修饰的是 static 方法，那么所有对象共用同一把锁
修饰方法时，无论如何退出，都会释放锁
是非公平锁

对象锁
修饰方法：方法锁（默认锁的对象是 this）
修饰同步代码块：同步代码块锁（可以自己指定锁对象）

类锁
修饰静态方法
修饰指定的 Class 对象

原理分析12345678910public class SynchronizedDemo2 &#123;    Object object = new Object();    public void method1() &#123;        synchronized (object) &#123;        &#125;        method2();    &#125;    private static void method2() &#123;   ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/03/01/Java%20%E5%B9%B6%E5%8F%91_%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80%E7%AF%87/" title="Java 并发_理论基础篇">Java 并发_理论基础篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-28T16:00:00.000Z" title="发表于 2023-03-01 00:00:00">2023-03-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JavaSE/">JavaSE</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91/">并发</a></span></div><div class="content">内容包括：

多线程要解决的问题
什么是线程不安全
线程不安全的本质
Java 如何解决并发问题：JMM
线程安全实现思路：互斥同步、非阻塞同步、无同步




为什么需要多线程CPU、内存、I&#x2F;O 设备 的速度差异很大，为合理利用 CPU 性能，平衡三者速度差异：

CPU 增加缓存：CPU 增加缓存平衡与内存之间的速度差异——导致可见性问题
操作系统增加进程、线程：以分时复用 CPU 来平衡 CPU 与 I&#x2F;O 设备之间的速度差异——导致原子性问题
优化程序执行顺序：编译程序优化指令的执行顺序，更合理地利用缓存——导致有序性问题


并发问题根源：并发三要素可见性：CPU 缓存引起可见性：一个线程对共享变量的修改，另一个线程能够立即看到。
原子性：分时复用引起原子性：一个或多个操作要么全部执行且不会被中断，要么不执行。
有序性：重排序引起有序性：程序的执行顺序按代码的先后顺序执行。
执行程序时，为提高性能，编译器和处理器常会对指令进行重排序，有三种：

编译器优化的重排序
指令级并行的重排序
内存系统的重排序


Java 如何解决并发问题：JMM[详见 Jav ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/03/01/Java%20%E5%B9%B6%E5%8F%91_%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%AF%87/" title="Java 并发_线程基础篇">Java 并发_线程基础篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-28T16:00:00.000Z" title="发表于 2023-03-01 00:00:00">2023-03-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JavaSE/">JavaSE</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91/">并发</a></span></div><div class="content">内容包括：

线程状态
线程的使用
基础线程机制
线程中断
互斥同步：synchronized、ReentrantLock
线程协作：join()、wait()、notify()&#x2F;notifyAll()、await()、signal()&#x2F;signalAll()




线程状态转换六种状态

创建：创建后未启动

可运行：可能正在运行，也可能正在等待 CPU 时间片，包含操作系统中的两种状态：Running 和 Ready

阻塞：等待获取一个排他锁（也叫写锁、X锁、独占锁），如果其他线程释放了锁，那么当前线程结束此状态

无限期等待：等待其他线程 “显式” 唤醒，否则一直等待



进入方法
退出方法



没有设置 Timeout 参数的 Object.wait()
Object.notify()&#x2F;Object.notifyAll()


没有设置 Timeout 参数的 Thread.join()
被调用的线程执行完毕


LockSupport.park()
-



限期等待：一定时间后会被系统自动唤醒

睡眠：调用 Thread.sleep() ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/03/01/Java%20%E5%B9%B6%E5%8F%91_Java%20%E4%B8%AD%E6%89%80%E6%9C%89%E7%9A%84%E9%94%81/" title="Java 并发_Java 中所有的锁">Java 并发_Java 中所有的锁</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-28T16:00:00.000Z" title="发表于 2023-03-01 00:00:00">2023-03-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JavaSE/">JavaSE</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91/">并发</a></span></div><div class="content">内容包括：

所有的锁种类
它们间的对比




总览
乐观锁 vs 悲观锁悲观锁：对同一数据进行并发操作时，悲观地认为自己在使用数据时一定会有其他线程来修改数据，所以获取数据时加锁，以保证其他线程不会修改该数据。如：synchronized 和 Lock 就是悲观锁。
乐观锁：乐观地认为自己在使用数据时不会有其他线程修改数据，所以不添加锁，只是在更新数据之前先判断一下该数据是否已经被其他线程修改了。如果没有数据被修改过，则成功写入；如果数据被其他线程修改过，则根据不同的实现方式执行不同的操作（报错、自旋、……）。如：CAS 算法（Java 原子类中的递增操作就是通过 CAS 自旋实现的）

悲观锁更适合写操作多的场景
乐观锁更适合读操作多的场景

自旋锁 vs 适应性自旋锁在诸多场景中，同步资源的锁定时间很短，为了这一小段时间而去切换线程，得不偿失。（线程的挂起和恢复都需要花费不少资源）
自旋，就是为了让当前线程可以不必阻塞而直接获取同步资源，避免切换线程的开销。

自旋锁的不足：

避免了线程切换的开销，但它并没有放弃 CPU 时间片
如果锁被占用的时间短，自旋等待效果很好；但反之 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/02/28/%E3%80%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E3%80%8D%E5%B9%B6%E5%8F%91%E4%BF%AE%E6%94%B9%E5%BC%82%E5%B8%B8/" title="「源码分析」并发修改异常源码分析">「源码分析」并发修改异常源码分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-27T16:00:00.000Z" title="发表于 2023-02-28 00:00:00">2023-02-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">源码分析</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%B9%B6%E5%8F%91/">并发</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%BC%82%E5%B8%B8/">异常</a></span></div><div class="content">为什么集合删除元素不能用 for-each&#x2F;Iterator？



背景如下代码报错：
1234567891011121314151617public class Main &#123;    public static void main(String[] args) &#123;        List&lt;String&gt; list = new ArrayList&lt;String&gt;();        list.add(&quot;a&quot;);        list.add(&quot;b&quot;);        list.add(&quot;c&quot;);        Iterator&lt;String&gt; it = list.iterator();        // 如果 list 里面有 &quot;b&quot;，则添加 &quot;d&quot;        while (it.hasNext()) &#123;            String s = it.next(); // ConcurrentModi ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/02/28/%E5%85%AB%E8%82%A1%E6%8E%8C%E6%8F%A1%E5%86%85%E5%AE%B9%E6%A6%82%E8%A7%88/" title="八股掌握内容概览">八股掌握内容概览</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-27T16:00:00.000Z" title="发表于 2023-02-28 00:00:00">2023-02-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JavaSE/">JavaSE</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%85%AB%E8%82%A1/">八股</a></span></div><div class="content">必会。


基础部分
JavaSE： 
基础语法
继承
多态
接口
抽象类
……


Java 集合，重点了解：
ArrayList
LinkedList
HashMap
HashTable
ConcurrentHashMap
HashSet


Java 并发：
线程基础方法
多线程语法
多线程机制
线程池机制
关键字（synchronized、volatile）
锁（自旋锁、重入锁、偏向锁、重量级锁、……）


设计模式：
单例模式的实现
观察者模式的实现


JVM：
类加载机制
JVM 内存结构
GC 相关


数据结构：
各种排序
链表、树


MySQL：
事务特性
隔离级别
索引用法及底层实现（B 树、B+ 树）
乐观锁、悲观锁
MVCC
SQL 优化
MySQL 引擎
HTTP 协议、Linux 基础命令


计网：
OSI 七层，及每层特点
TCP&#x2F;IP 协议
网络层
传输层
TCP
UDP
拥塞控制
连接断开流程
每个阶段的状态
……


应用层
DNS 协议
HTTP 协议趋势变化
HTTPS
HTTP1.0
HTTP1.1
HTTP2.0
HTTP 传 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/%E5%A4%B4.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">yanxx</div><div class="author-info__description">全世界的无产者，联合起来！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/byYanXX"><i class="fab fa-github"></i><span>byYanXX's github</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">星星之火，可以燎原！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/06/%E8%AE%A1%E7%BD%91_HTTP%20%E7%AF%87/" title="计网_HTTP 篇">计网_HTTP 篇</a><time datetime="2023-03-05T16:00:00.000Z" title="发表于 2023-03-06 00:00:00">2023-03-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/02/%E3%80%8C%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E3%80%8D%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81%E9%81%BF%E5%85%8D%E6%AD%BB%E9%94%81/" title="「源码分析」可重入锁避免死锁">「源码分析」可重入锁避免死锁</a><time datetime="2023-03-01T16:00:00.000Z" title="发表于 2023-03-02 00:00:00">2023-03-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/02/Java%20%E5%B9%B6%E5%8F%91_synchronized%20%E5%8F%8A%E5%85%B6%E4%BC%98%E5%8C%96/" title="Java 并发_synchronized 及其优化">Java 并发_synchronized 及其优化</a><time datetime="2023-03-01T16:00:00.000Z" title="发表于 2023-03-02 00:00:00">2023-03-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/01/Java%20%E5%B9%B6%E5%8F%91_%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80%E7%AF%87/" title="Java 并发_理论基础篇">Java 并发_理论基础篇</a><time datetime="2023-02-28T16:00:00.000Z" title="发表于 2023-03-01 00:00:00">2023-03-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/03/01/Java%20%E5%B9%B6%E5%8F%91_%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E7%AF%87/" title="Java 并发_线程基础篇">Java 并发_线程基础篇</a><time datetime="2023-02-28T16:00:00.000Z" title="发表于 2023-03-01 00:00:00">2023-03-01</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JavaSE/"><span class="card-category-list-name">JavaSE</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%94%BF%E6%B2%BB-%E7%BB%8F%E6%B5%8E-%E6%97%A0%E4%BA%A7%E8%80%85/"><span class="card-category-list-name">政治/经济/无产者</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"><span class="card-category-list-name">源码分析</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="card-category-list-name">计算机基础</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E5%85%AB%E8%82%A1/" style="font-size: 1.1em; color: #999">八股</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.5em; color: #99a9bf">并发</a> <a href="/tags/JUC/" style="font-size: 1.1em; color: #999">JUC</a> <a href="/tags/%E5%85%B1%E4%BA%A7%E4%B8%BB%E4%B9%89/" style="font-size: 1.1em; color: #999">共产主义</a> <a href="/tags/%E5%BC%82%E5%B8%B8/" style="font-size: 1.1em; color: #999">异常</a> <a href="/tags/%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size: 1.1em; color: #999">关键字</a> <a href="/tags/HTTP/" style="font-size: 1.1em; color: #999">HTTP</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 1.1em; color: #999">计算机网络</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">9</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-03-06T07:04:29.755Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By yanxx</div><div class="footer_custom_text">人民，只有人民，才是创造历史的动力！</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, {"source":false}))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["前途是光明的！"])
  } else {
    document.getElementById("subtitle").innerHTML = '前途是光明的！'
  }
}
typedJSFn.run(subtitleType)</script></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script></div></body></html>